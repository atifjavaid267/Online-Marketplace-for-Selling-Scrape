
<%=render 'users/navbar' %>

<div class="flex flex-row items-center justify-center">
    <div class="flex flex-row items-start justify-start my-20 w-full max-w-2xl">
      <div class="flex flex-col items-start justify-center space-y-8 flex-1">

        <% product = Product.find_by(id: @ad.product_id) %>
        <% address = Address.find_by(id: @ad.address_id) %>

        <h4 class="font-semibold text-lg">Name:</h4>
        <p class="text-gray-700 mb-6"><%= product.name %></p>

        <h4 class="font-semibold text-lg">Price:</h4>
        <p class="text-gray-700 mb-6"><%= @ad.price %></p>

        <h4 class="font-semibold text-lg">Description:</h4>
        <p class="text-gray-700 mb-10"><%= @ad.description %></p>

        <h4 class="font-semibold text-lg">Address:</h4>
        <p class="text-gray-700 mb-10">
             <%= "#{address.street1} #{address.street2}, #{address.city}, #{address.zip_code}, #{address.state}" %>
        </p>

        <div>
          <div class="flex justify-between"></div>
          <% if current_user.admin? %>
              <% if @ad.status %>
                <% if can? :index, Ad %>
                  <%= link_to "Back", ads_path, class: "bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-2 rounded-lg shadow-md transition duration-300 ease-in-out", style: "margin: 2px;"%>
                <% end %>
              <%else%>
                <% if can? :archives, Ad%>
                  <%= link_to "Back", archives_ads_path, class: "bg-gray-300 hover:bg-gray-400 text-gray-800 px-6 py-2 rounded-lg shadow-md transition duration-300 ease-in-out", style: "margin: 2px;"%>
                <% end %>
              <%end%>
          <% elsif current_user.seller? %>
              <button class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-2 px-4 rounded" style="margin: 2px;" onclick="window.history.back();">Back</button>
              <% if can? :edit, Ad %>
                <%= link_to "Edit Ad", edit_ad_path(@ad), class: "font-bold bg-blue-500 text-white px-6 py-2 rounded-lg shadow-md hover:bg-blue-600 transition duration-300 ease-in-out", style: "margin: 2px;"%>
              <%end%>
          <% elsif current_user.buyer? %>
            <%= link_to "Back", buyer_home_path, class: "font-bold bg-gray-300 text-gray-800 px-6 py-2 rounded-lg shadow-md hover:bg-gray-400 transition duration-300 ease-in-out", style: "margin: 2px;"%>
            <% if can? :new, Bid %>
              <%= link_to "Bid", new_ad_bid_path(@ad), class: "font-bold bg-green-500 text-white px-8 py-2 rounded-lg shadow-md hover:bg-green-600 transition duration-300 ease-in-out", style: "margin: 2px;"%>
            <% end %>
          <% end %>
          <% if can? :view_bids, Ad %>
            <%= link_to "View Bids", view_bids_ad_path, class: "bg-green-500 text-white px-6 py-2 rounded-lg shadow-md hover:bg-green-600 transition duration-300 ease-in-out", style: "margin: 2px;"%>
          <% end %>
        </div>
    </div>
    <div>
      <% if @ad.ad_images.attached? %>
        <% @ad.ad_images.each do |image| %>
            <%= image_tag image, style: "length: 200px; width: 200px"%>
            <span> </span>
        <% end %>
    <% end %>
    </div>
</div>
